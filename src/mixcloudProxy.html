<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <script src="https://widget.mixcloud.com/media/js/footerWidgetApi.js"></script>
    <script>
      var feedUrl = window.location.search.replace('?mixcloudUrl=', '');
      var promise = Mixcloud.FooterWidget(feedUrl, { light: true, hide_artwork: true });
      promise.then(function(widget) {
        widget.play();

        widget.events.play.on(function() {
          window.postMessage('play');
        });

        widget.events.pause.on(function() {
          window.postMessage('pause');
        });

        widget.events.ended.on(function() {
          window.postMessage('ended');
        })
      });
    </script>
  </body>
</html>
